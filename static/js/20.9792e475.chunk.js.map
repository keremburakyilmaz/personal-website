{"version":3,"file":"static/js/20.9792e475.chunk.js","mappings":"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","sources":["what-you-remember/engine/state.js","what-you-remember/engine/reducer.js","what-you-remember/engine/persistence.js","what-you-remember/engine/validateStory.js","what-you-remember/engine/selectors.js","what-you-remember/ui/ChoiceList.jsx","what-you-remember/ui/SceneView.jsx","what-you-remember/ui/ContentNote.jsx","what-you-remember/ui/ReflectionView.jsx","what-you-remember/ui/EndingView.jsx","what-you-remember/ui/SettingsDrawer.jsx","what-you-remember/ui/GameRoute.jsx","what-you-remember/engine/rules.js"],"sourcesContent":["/**\n * Initial game state\n */\nexport const initialState = {\n  sceneId: null,\n  primacyId: null,\n  stats: {\n    honesty: 0,\n    avoidance: 0,\n    tenderness: 0,\n    anger: 0,\n    shame: 0,\n  },\n  clocks: {\n    pressure: 0,\n  },\n  flags: {},\n  weights: {},\n  memories: [],\n  history: [],\n};\n\n/**\n * Create a fresh game state\n */\nexport function createInitialState(startSceneId) {\n  return {\n    ...initialState,\n    sceneId: startSceneId,\n  };\n}\n\n\n","import { initialState } from './state';\n\n/**\n * Game state reducer\n */\nexport function gameReducer(state, action) {\n  switch (action.type) {\n    case 'LOAD_STATE':\n      return { ...state, ...action.payload };\n\n    case 'NAVIGATE':\n      return {\n        ...state,\n        sceneId: action.payload.sceneId,\n        history: [...state.history, { sceneId: state.sceneId, timestamp: Date.now() }],\n      };\n\n    case 'APPLY_EFFECTS':\n      return applyEffects(state, action.payload.effects);\n\n    case 'RESET':\n      return {\n        ...initialState,\n        sceneId: action.payload.startSceneId || state.sceneId,\n      };\n\n    default:\n      return state;\n  }\n}\n\n/**\n * Apply effects to state\n */\nfunction applyEffects(state, effects) {\n  let newState = { ...state };\n\n  if (effects.set) {\n    Object.entries(effects.set).forEach(([key, value]) => {\n      if (key === 'primacyId' && !newState.primacyId) {\n        // Primacy lock: can only be set once\n        newState.primacyId = value;\n      } else if (key !== 'primacyId') {\n        newState[key] = value;\n      }\n    });\n  }\n\n  if (effects.addStats) {\n    newState.stats = { ...newState.stats };\n    Object.entries(effects.addStats).forEach(([stat, value]) => {\n      newState.stats[stat] = (newState.stats[stat] || 0) + value;\n    });\n  }\n\n  if (effects.addClock) {\n    newState.clocks = { ...newState.clocks };\n    Object.entries(effects.addClock).forEach(([clock, value]) => {\n      newState.clocks[clock] = (newState.clocks[clock] || 0) + value;\n    });\n  }\n\n  if (effects.setFlags) {\n    newState.flags = { ...newState.flags };\n    effects.setFlags.forEach((flag) => {\n      newState.flags[flag] = true;\n    });\n  }\n\n  if (effects.addWeights) {\n    newState.weights = { ...newState.weights };\n    Object.entries(effects.addWeights).forEach(([weight, value]) => {\n      newState.weights[weight] = (newState.weights[weight] || 0) + value;\n    });\n  }\n\n  if (effects.addMemory) {\n    newState.memories = [...newState.memories, effects.addMemory];\n  }\n\n  return newState;\n}\n\n\n","/**\n * Persistence layer for game state\n */\n\nconst STORAGE_KEY = 'what-you-remember-game-state';\n\n/**\n * Save game state to localStorage\n */\nexport function saveGameState(state) {\n  try {\n    const serialized = JSON.stringify(state);\n    localStorage.setItem(STORAGE_KEY, serialized);\n  } catch (error) {\n    console.warn('Failed to save game state:', error);\n  }\n}\n\n/**\n * Load game state from localStorage\n */\nexport function loadGameState() {\n  try {\n    const serialized = localStorage.getItem(STORAGE_KEY);\n    if (serialized) {\n      return JSON.parse(serialized);\n    }\n  } catch (error) {\n    console.warn('Failed to load game state:', error);\n  }\n  return null;\n}\n\n/**\n * Clear saved game state\n */\nexport function clearGameState() {\n  try {\n    localStorage.removeItem(STORAGE_KEY);\n  } catch (error) {\n    console.warn('Failed to clear game state:', error);\n  }\n}\n\n/**\n * Check if there's a saved game\n */\nexport function hasSavedGame() {\n  return localStorage.getItem(STORAGE_KEY) !== null;\n}\n\n\n","/**\n * Story validation - checks story.json structure\n */\n\nexport function validateStory(story) {\n  const errors = [];\n  const warnings = [];\n\n  if (!story) {\n    errors.push('Story is null or undefined');\n    return { valid: false, errors, warnings };\n  }\n\n  // Check meta\n  if (!story.meta) {\n    errors.push('Missing meta object');\n  } else {\n    if (!story.meta.id) errors.push('Missing meta.id');\n    if (!story.meta.title) warnings.push('Missing meta.title');\n  }\n\n  // Check startSceneId\n  if (!story.startSceneId) {\n    errors.push('Missing startSceneId');\n  }\n\n  // Check scenes\n  if (!story.scenes || !Array.isArray(story.scenes)) {\n    errors.push('Missing or invalid scenes array');\n    return { valid: false, errors, warnings };\n  }\n\n  if (story.scenes.length === 0) {\n    errors.push('Scenes array is empty');\n  }\n\n  // Build scene map\n  const sceneMap = new Map();\n  story.scenes.forEach((scene) => {\n    if (!scene.id) {\n      errors.push('Scene missing id');\n      return;\n    }\n    if (sceneMap.has(scene.id)) {\n      errors.push(`Duplicate scene id: ${scene.id}`);\n    }\n    sceneMap.set(scene.id, scene);\n  });\n\n  // Check startSceneId exists\n  if (story.startSceneId && !sceneMap.has(story.startSceneId)) {\n    errors.push(`startSceneId \"${story.startSceneId}\" does not exist in scenes`);\n  }\n\n  // Validate each scene\n  story.scenes.forEach((scene) => {\n    validateScene(scene, sceneMap, errors, warnings);\n  });\n\n  // Check for unreachable scenes\n  if (story.startSceneId) {\n    const reachable = findReachableScenes(story.startSceneId, sceneMap);\n    const allSceneIds = new Set(sceneMap.keys());\n    const unreachable = Array.from(allSceneIds).filter((id) => !reachable.has(id));\n    if (unreachable.length > 0) {\n      warnings.push(`Unreachable scenes: ${unreachable.join(', ')}`);\n    }\n  }\n\n  return {\n    valid: errors.length === 0,\n    errors,\n    warnings,\n  };\n}\n\nfunction validateScene(scene, sceneMap, errors, warnings) {\n  if (!scene.kind) {\n    warnings.push(`Scene ${scene.id} missing kind`);\n  }\n\n  const validKinds = ['prompt', 'memory', 'question', 'crossroads', 'reflection', 'ending'];\n  if (scene.kind && !validKinds.includes(scene.kind)) {\n    warnings.push(`Scene ${scene.id} has invalid kind: ${scene.kind}`);\n  }\n\n  // Check choices\n  if (scene.choices) {\n    if (!Array.isArray(scene.choices)) {\n      errors.push(`Scene ${scene.id} has invalid choices (not an array)`);\n      return;\n    }\n\n    if (scene.choices.length === 0 && scene.kind !== 'ending' && scene.kind !== 'reflection') {\n      warnings.push(`Scene ${scene.id} has no choices (may be unreachable)`);\n    }\n\n    scene.choices.forEach((choice, index) => {\n      if (!choice.id) {\n        errors.push(`Scene ${scene.id}, choice ${index} missing id`);\n      }\n      if (!choice.label) {\n        errors.push(`Scene ${scene.id}, choice ${index} missing label`);\n      }\n      if (!choice.next) {\n        if (scene.kind !== 'ending') {\n          warnings.push(`Scene ${scene.id}, choice ${index} missing next (may be intentional)`);\n        }\n      } else if (!sceneMap.has(choice.next)) {\n        errors.push(`Scene ${scene.id}, choice ${index} references non-existent scene: ${choice.next}`);\n      }\n\n      // Validate conditions\n      if (choice.conditions) {\n        choice.conditions.forEach((condition, condIndex) => {\n          if (!condition.type) {\n            errors.push(`Scene ${scene.id}, choice ${index}, condition ${condIndex} missing type`);\n          }\n        });\n      }\n    });\n  } else if (scene.kind !== 'ending' && scene.kind !== 'reflection') {\n    warnings.push(`Scene ${scene.id} has no choices`);\n  }\n}\n\nfunction findReachableScenes(startId, sceneMap) {\n  const reachable = new Set();\n  const visited = new Set();\n\n  function traverse(sceneId) {\n    if (visited.has(sceneId) || !sceneMap.has(sceneId)) return;\n    visited.add(sceneId);\n    reachable.add(sceneId);\n\n    const scene = sceneMap.get(sceneId);\n    if (scene.choices) {\n      scene.choices.forEach((choice) => {\n        if (choice.next) {\n          traverse(choice.next);\n        }\n      });\n    }\n  }\n\n  traverse(startId);\n  return reachable;\n}\n\n\n","/**\n * Selectors for game state\n */\n\nexport function getCurrentScene(state, story) {\n  if (!state.sceneId || !story?.scenes) return null;\n  return story.scenes.find((scene) => scene.id === state.sceneId);\n}\n\nexport function getAvailableChoices(state, scene) {\n  if (!scene?.choices) return [];\n\n  return scene.choices.filter((choice) => {\n    if (!choice.conditions) return true;\n\n    return choice.conditions.every((condition) => {\n      return evaluateCondition(state, condition);\n    });\n  });\n}\n\nexport function evaluateCondition(state, condition) {\n  switch (condition.type) {\n    case 'flag':\n      if (condition.op === 'isTrue') {\n        return !!state.flags[condition.flag];\n      }\n      if (condition.op === 'isFalse') {\n        return !state.flags[condition.flag];\n      }\n      return false;\n\n    case 'stat':\n      const statValue = state.stats[condition.stat] || 0;\n      return compareValues(statValue, condition.op, condition.value);\n\n    case 'clock':\n      const clockValue = state.clocks[condition.clock] || 0;\n      return compareValues(clockValue, condition.op, condition.value);\n\n    case 'primacy':\n      if (condition.op === 'equals') {\n        return state.primacyId === condition.value;\n      }\n      if (condition.op === 'notEquals') {\n        return state.primacyId !== condition.value;\n      }\n      return false;\n\n    default:\n      return true;\n  }\n}\n\nfunction compareValues(actual, op, expected) {\n  switch (op) {\n    case '>=':\n      return actual >= expected;\n    case '<=':\n      return actual <= expected;\n    case '>':\n      return actual > expected;\n    case '<':\n      return actual < expected;\n    case '===':\n    case '==':\n      return actual === expected;\n    case '!==':\n    case '!=':\n      return actual !== expected;\n    default:\n      return true;\n  }\n}\n\nexport function getDerivedTone(state) {\n  // Drift: derive tone from stats\n  const { honesty, avoidance, tenderness, anger, shame, pressure } = {\n    ...state.stats,\n    pressure: state.clocks.pressure || 0,\n  };\n\n  if (pressure >= 6) return 'intrusive';\n  if (honesty > avoidance && honesty > 3) return 'honest';\n  if (avoidance > honesty && avoidance > 3) return 'protective';\n  if (tenderness > anger && tenderness > 2) return 'tender';\n  if (anger > tenderness && anger > 2) return 'sharp';\n  if (shame > 3) return 'guilty';\n  return 'neutral';\n}\n\nexport function getPressureTier(state) {\n  const pressure = state.clocks.pressure || 0;\n  if (pressure >= 8) return 'high';\n  if (pressure >= 6) return 'medium';\n  if (pressure >= 3) return 'low';\n  return 'none';\n}\n\n\n","import { useRef } from 'react';\n\nexport default function ChoiceList({ choices, onChoice }) {\n  const containerRef = useRef(null);\n  const choiceRefs = useRef([]);\n\n  const handleKeyDown = (e, index) => {\n    switch (e.key) {\n      case 'ArrowDown':\n        e.preventDefault();\n        const nextIndex = Math.min(index + 1, choices.length - 1);\n        choiceRefs.current[nextIndex]?.focus();\n        break;\n      case 'ArrowUp':\n        e.preventDefault();\n        const prevIndex = Math.max(index - 1, 0);\n        choiceRefs.current[prevIndex]?.focus();\n        break;\n      case 'Enter':\n      case ' ':\n        e.preventDefault();\n        onChoice(choices[index]);\n        break;\n      default:\n        break;\n    }\n  };\n\n  return (\n    <div className=\"choice-list\" ref={containerRef} role=\"listbox\">\n      {choices.map((choice, index) => (\n        <button\n          key={choice.id}\n          ref={(el) => (choiceRefs.current[index] = el)}\n          className=\"choice-button\"\n          onClick={() => onChoice(choice)}\n          onKeyDown={(e) => handleKeyDown(e, index)}\n          role=\"option\"\n          aria-selected=\"false\"\n          tabIndex={index === 0 ? 0 : -1}\n        >\n          {choice.label}\n        </button>\n      ))}\n    </div>\n  );\n}\n\n\n","import ChoiceList from './ChoiceList';\n\nexport default function SceneView({ scene, blocks, choices, onChoice, intrusiveLines, tone, pressureTier }) {\n  return (\n    <div className=\"scene-view\">\n      {scene.title && <h1 className=\"scene-title\">{scene.title}</h1>}\n      \n      <div className=\"scene-blocks\">\n        {blocks.map((block, index) => {\n          const BlockComponent = getBlockComponent(block.type, block.speaker);\n          return (\n            <BlockComponent key={index} block={block} tone={tone} />\n          );\n        })}\n      </div>\n\n      {intrusiveLines.length > 0 && (\n        <div className=\"intrusive-lines\">\n          {intrusiveLines.map((line, index) => (\n            <div key={index} className=\"intrusive-line\">\n              {line}\n            </div>\n          ))}\n        </div>\n      )}\n\n      {choices.length > 0 && (\n        <ChoiceList choices={choices} onChoice={onChoice} />\n      )}\n    </div>\n  );\n}\n\nfunction getBlockComponent(type, speaker) {\n  if (type === 'whisper' || speaker === 'brain') {\n    return WhisperBlock;\n  }\n  if (speaker === 'someone') {\n    return DialogueBlock;\n  }\n  return ParagraphBlock;\n}\n\nfunction ParagraphBlock({ block, tone }) {\n  return <p className=\"block-paragraph\">{block.text}</p>;\n}\n\nfunction DialogueBlock({ block, tone }) {\n  return (\n    <p className=\"block-dialogue\">\n      {block.text}\n    </p>\n  );\n}\n\nfunction WhisperBlock({ block, tone }) {\n  return (\n    <p className={`block-whisper ${block.emphasis ? 'emphasis' : ''}`}>\n      {block.text}\n    </p>\n  );\n}\n\n\n","import { useEffect } from 'react';\nimport ChoiceList from './ChoiceList';\n\nfunction getBlockClassName(block) {\n  if (block.speaker === 'someone') {\n    return 'content-note-dialogue';\n  }\n  if (block.speaker === 'brain' || block.type === 'whisper') {\n    return 'content-note-whisper';\n  }\n  return 'content-note-text';\n}\n\nexport default function ContentNote({ scene, choices, onChoice, skipNote }) {\n  useEffect(() => {\n    if (skipNote) {\n      // If skip flag is set, auto-advance to first choice\n      const firstChoice = choices[0];\n      if (firstChoice) {\n        onChoice(firstChoice);\n      }\n    }\n  }, [skipNote, choices, onChoice]);\n\n  if (skipNote) {\n    return null;\n  }\n\n  return (\n    <div className=\"content-note\">\n      {scene.title && <h1 className=\"content-note-title\">{scene.title}</h1>}\n      \n      <div className=\"content-note-blocks\">\n        {scene.blocks?.map((block, index) => {\n          const className = getBlockClassName(block);\n          return (\n            <p key={index} className={className}>\n              {block.text}\n            </p>\n          );\n        })}\n      </div>\n\n      {choices.length > 0 && (\n        <ChoiceList choices={choices} onChoice={onChoice} />\n      )}\n    </div>\n  );\n}\n\n","import ChoiceList from './ChoiceList';\nimport { getDerivedTone, getPressureTier } from '../engine/selectors';\nimport reflectionLinesData from '../data/reflectionLines.json';\n\nfunction getBlockClassName(block) {\n  if (block.speaker === 'someone') {\n    return 'reflection-dialogue';\n  }\n  if (block.speaker === 'brain' || block.type === 'whisper') {\n    return 'reflection-whisper';\n  }\n  return 'reflection-text';\n}\n\nexport default function ReflectionView({ scene, state, choices, onChoice }) {\n  const tone = getDerivedTone(state);\n\n  // Generate reflection lines based on state using reflectionLines.json\n  const reflectionLines = generateReflectionLines(state, tone);\n\n  return (\n    <div className=\"reflection-view\">\n      {scene.title && <h1 className=\"reflection-title\">{scene.title}</h1>}\n      \n      <div className=\"reflection-blocks\">\n        {scene.blocks?.map((block, index) => {\n          const className = getBlockClassName(block);\n          return (\n            <p key={index} className={className}>\n              {block.text}\n            </p>\n          );\n        })}\n      </div>\n\n      <div className=\"reflection-lines\">\n        {reflectionLines.map((line, index) => (\n          <p key={index} className=\"reflection-line\">\n            {line}\n          </p>\n        ))}\n      </div>\n\n      {choices.length > 0 && (\n        <ChoiceList choices={choices} onChoice={onChoice} />\n      )}\n    </div>\n  );\n}\n\nfunction generateReflectionLines(state, tone) {\n  const lines = [];\n  const { honesty, avoidance, tenderness, anger, shame } = state.stats;\n  const pressureTier = getPressureTier(state);\n\n  // 1. Primacy-based lines (if primacy is set)\n  if (state.primacyId && reflectionLinesData.primacy[state.primacyId]) {\n    const primacyLines = reflectionLinesData.primacy[state.primacyId];\n    // Pick 1-2 random lines from primacy\n    const selected = shuffleArray([...primacyLines]).slice(0, Math.min(2, primacyLines.length));\n    lines.push(...selected);\n  }\n\n  // 2. Dominant stat lines\n  const stats = { honesty, avoidance, tenderness, anger, shame };\n  const dominantStat = Object.entries(stats).reduce((a, b) => (stats[a[0]] > stats[b[0]] ? a : b))[0];\n  const dominantValue = stats[dominantStat];\n  \n  if (dominantValue > 2 && reflectionLinesData.dominant[dominantStat]) {\n    const dominantLines = reflectionLinesData.dominant[dominantStat];\n    const selected = shuffleArray([...dominantLines])[0];\n    if (selected) lines.push(selected);\n  }\n\n  // 3. Suppression lines\n  const hasSuppression = Object.keys(state.flags).some((flag) =>\n    flag.includes('suppressed') || flag.includes('postponed')\n  );\n  const suppressionKey = hasSuppression ? 'present' : 'absent';\n  if (reflectionLinesData.suppression[suppressionKey]) {\n    const suppressionLines = reflectionLinesData.suppression[suppressionKey];\n    const selected = shuffleArray([...suppressionLines])[0];\n    if (selected) lines.push(selected);\n  }\n\n  // 4. Pressure tier lines\n  const pressureKey = pressureTier === 'high' ? 'high' : pressureTier === 'medium' ? 'mid' : 'low';\n  if (reflectionLinesData.pressureTier[pressureKey]) {\n    const pressureLines = reflectionLinesData.pressureTier[pressureKey];\n    const selected = shuffleArray([...pressureLines])[0];\n    if (selected) lines.push(selected);\n  }\n\n  // Default if no lines were selected\n  if (lines.length === 0) {\n    lines.push(\"You told the story as it came to you.\");\n  }\n\n  return lines;\n}\n\n// Helper function to shuffle array (Fisher-Yates)\nfunction shuffleArray(array) {\n  const shuffled = [...array];\n  for (let i = shuffled.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];\n  }\n  return shuffled;\n}\n\n\n","function getBlockClassName(block) {\n  if (block.speaker === 'someone') {\n    return 'ending-dialogue';\n  }\n  if (block.speaker === 'brain' || block.type === 'whisper') {\n    return 'ending-whisper';\n  }\n  return 'ending-text';\n}\n\nexport default function EndingView({ scene, state, onRestart }) {\n  return (\n    <div className=\"ending-view\">\n      {scene.title && <h1 className=\"ending-title\">{scene.title}</h1>}\n      \n      <div className=\"ending-blocks\">\n        {scene.blocks?.map((block, index) => {\n          const className = getBlockClassName(block);\n          return (\n            <p key={index} className={className}>\n              {block.text}\n            </p>\n          );\n        })}\n      </div>\n\n      <div className=\"ending-actions\">\n        <button className=\"ending-restart-button\" onClick={onRestart}>\n          Restart with a different first memory\n        </button>\n      </div>\n    </div>\n  );\n}\n\n\n","export default function SettingsDrawer({ state, onClose, onRestart, validationResult }) {\n  return (\n    <div className=\"settings-drawer-overlay\" onClick={onClose}>\n      <div className=\"settings-drawer\" onClick={(e) => e.stopPropagation()}>\n        <div className=\"settings-header\">\n          <h2>Debug Panel</h2>\n          <button className=\"settings-close\" onClick={onClose}>\n            ×\n          </button>\n        </div>\n\n        <div className=\"settings-content\">\n          <section className=\"settings-section\">\n            <h3>Current State</h3>\n            <div className=\"settings-state\">\n              <div className=\"state-item\">\n                <strong>Scene:</strong> {state.sceneId}\n              </div>\n              <div className=\"state-item\">\n                <strong>Primacy:</strong> {state.primacyId || 'Not set'}\n              </div>\n            </div>\n          </section>\n\n          <section className=\"settings-section\">\n            <h3>Stats</h3>\n            <div className=\"settings-stats\">\n              {Object.entries(state.stats).map(([key, value]) => (\n                <div key={key} className=\"stat-item\">\n                  <strong>{key}:</strong> {value}\n                </div>\n              ))}\n            </div>\n          </section>\n\n          <section className=\"settings-section\">\n            <h3>Clocks</h3>\n            <div className=\"settings-clocks\">\n              {Object.entries(state.clocks).map(([key, value]) => (\n                <div key={key} className=\"clock-item\">\n                  <strong>{key}:</strong> {value}\n                </div>\n              ))}\n            </div>\n          </section>\n\n          <section className=\"settings-section\">\n            <h3>Flags</h3>\n            <div className=\"settings-flags\">\n              {Object.keys(state.flags).length === 0 ? (\n                <div className=\"no-flags\">No flags set</div>\n              ) : (\n                Object.keys(state.flags).map((flag) => (\n                  <div key={flag} className=\"flag-item\">\n                    {flag}\n                  </div>\n                ))\n              )}\n            </div>\n          </section>\n\n          <section className=\"settings-section\">\n            <h3>Memories</h3>\n            <div className=\"settings-memories\">\n              {state.memories.length === 0 ? (\n                <div className=\"no-memories\">No memories yet</div>\n              ) : (\n                state.memories.map((memory, index) => (\n                  <div key={index} className=\"memory-item\">\n                    <strong>{memory.label}</strong> ({memory.kind})\n                  </div>\n                ))\n              )}\n            </div>\n          </section>\n\n          {validationResult && (\n            <section className=\"settings-section\">\n              <h3>Story Validation</h3>\n              <div className=\"validation-result\">\n                <div className={`validation-status ${validationResult.valid ? 'valid' : 'invalid'}`}>\n                  {validationResult.valid ? '✓ Valid' : '✗ Invalid'}\n                </div>\n                {validationResult.errors.length > 0 && (\n                  <div className=\"validation-errors\">\n                    <strong>Errors:</strong>\n                    <ul>\n                      {validationResult.errors.map((error, index) => (\n                        <li key={index}>{error}</li>\n                      ))}\n                    </ul>\n                  </div>\n                )}\n                {validationResult.warnings.length > 0 && (\n                  <div className=\"validation-warnings\">\n                    <strong>Warnings:</strong>\n                    <ul>\n                      {validationResult.warnings.map((warning, index) => (\n                        <li key={index}>{warning}</li>\n                      ))}\n                    </ul>\n                  </div>\n                )}\n              </div>\n            </section>\n          )}\n\n          <section className=\"settings-actions\">\n            <button className=\"settings-restart\" onClick={onRestart}>\n              Restart Game\n            </button>\n          </section>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n\n","import { useReducer, useEffect, useState } from 'react';\nimport { gameReducer } from '../engine/reducer';\nimport { createInitialState } from '../engine/state';\nimport { saveGameState, loadGameState, clearGameState } from '../engine/persistence';\nimport { validateStory } from '../engine/validateStory';\nimport { getCurrentScene, getAvailableChoices, getDerivedTone, getPressureTier } from '../engine/selectors';\nimport { filterChoicesByPressure, getIntrusiveLines, applyToneToBlocks } from '../engine/rules';\nimport SceneView from './SceneView';\nimport ContentNote from './ContentNote';\nimport ReflectionView from './ReflectionView';\nimport EndingView from './EndingView';\nimport SettingsDrawer from './SettingsDrawer';\nimport storyData from '../data/story.json';\nimport '../styles/game.css';\n\nexport default function GameRoute() {\n  const [state, dispatch] = useReducer(\n    gameReducer,\n    null,\n    () => {\n      const saved = loadGameState();\n      if (saved) {\n        return saved;\n      }\n      return createInitialState(storyData.startSceneId);\n    }\n  );\n\n  const [showSettings, setShowSettings] = useState(false);\n  const [validationResult, setValidationResult] = useState(null);\n\n  // Validate story on mount\n  useEffect(() => {\n    const result = validateStory(storyData);\n    setValidationResult(result);\n    if (!result.valid && process.env.NODE_ENV === 'development') {\n      console.error('Story validation errors:', result.errors);\n      console.warn('Story validation warnings:', result.warnings);\n    }\n  }, []);\n\n  // Save state after every change\n  useEffect(() => {\n    if (state.sceneId) {\n      saveGameState(state);\n    }\n  }, [state]);\n\n  const handleChoice = (choice) => {\n    // Apply effects\n    if (choice.effects) {\n      dispatch({ type: 'APPLY_EFFECTS', payload: { effects: choice.effects } });\n    }\n\n    // Navigate\n    if (choice.next) {\n      dispatch({ type: 'NAVIGATE', payload: { sceneId: choice.next } });\n    }\n  };\n\n  const handleRestart = () => {\n    clearGameState();\n    dispatch({ type: 'RESET', payload: { startSceneId: storyData.startSceneId } });\n  };\n\n  const scene = getCurrentScene(state, storyData);\n  if (!scene) {\n    return <div className=\"game-container\">Loading...</div>;\n  }\n\n  const availableChoices = getAvailableChoices(state, scene);\n  const filteredChoices = filterChoicesByPressure(availableChoices, state.clocks.pressure || 0);\n  const tone = getDerivedTone(state);\n  const pressureTier = getPressureTier(state);\n  const intrusiveLines = getIntrusiveLines(state.clocks.pressure || 0, tone);\n  const blocksWithTone = applyToneToBlocks(scene.blocks || [], tone);\n\n  // Route to appropriate view based on scene kind\n  if (scene.kind === 'prompt' && scene.id === 'p_content_note') {\n    return (\n      <div className=\"game-container\">\n        <ContentNote\n          scene={scene}\n          choices={filteredChoices}\n          onChoice={handleChoice}\n          skipNote={state.flags.skip_content_note}\n        />\n        {process.env.NODE_ENV === 'development' && (\n          <button\n            className=\"dev-settings-toggle\"\n            onClick={() => setShowSettings(!showSettings)}\n            aria-label=\"Toggle settings\"\n          >\n            ⚙️\n          </button>\n        )}\n        {showSettings && (\n          <SettingsDrawer\n            state={state}\n            onClose={() => setShowSettings(false)}\n            onRestart={handleRestart}\n            validationResult={validationResult}\n          />\n        )}\n      </div>\n    );\n  }\n\n  if (scene.kind === 'reflection') {\n    return (\n      <div className=\"game-container\">\n        <ReflectionView\n          scene={scene}\n          state={state}\n          choices={filteredChoices}\n          onChoice={handleChoice}\n        />\n        {process.env.NODE_ENV === 'development' && (\n          <button\n            className=\"dev-settings-toggle\"\n            onClick={() => setShowSettings(!showSettings)}\n            aria-label=\"Toggle settings\"\n          >\n            ⚙️\n          </button>\n        )}\n        {showSettings && (\n          <SettingsDrawer\n            state={state}\n            onClose={() => setShowSettings(false)}\n            onRestart={handleRestart}\n            validationResult={validationResult}\n          />\n        )}\n      </div>\n    );\n  }\n\n  if (scene.kind === 'ending') {\n    return (\n      <div className=\"game-container\">\n        <EndingView\n          scene={scene}\n          state={state}\n          onRestart={handleRestart}\n        />\n        {process.env.NODE_ENV === 'development' && (\n          <button\n            className=\"dev-settings-toggle\"\n            onClick={() => setShowSettings(!showSettings)}\n            aria-label=\"Toggle settings\"\n          >\n            ⚙️\n          </button>\n        )}\n        {showSettings && (\n          <SettingsDrawer\n            state={state}\n            onClose={() => setShowSettings(false)}\n            onRestart={handleRestart}\n            validationResult={validationResult}\n          />\n        )}\n      </div>\n    );\n  }\n\n  // Default: SceneView for prompt, memory, question, crossroads\n  return (\n    <div className=\"game-container\">\n      <SceneView\n        scene={scene}\n        blocks={blocksWithTone}\n        choices={filteredChoices}\n        onChoice={handleChoice}\n        intrusiveLines={intrusiveLines}\n        tone={tone}\n        pressureTier={pressureTier}\n      />\n      {process.env.NODE_ENV === 'development' && (\n        <button\n          className=\"dev-settings-toggle\"\n          onClick={() => setShowSettings(!showSettings)}\n          aria-label=\"Toggle settings\"\n        >\n          ⚙️\n        </button>\n      )}\n      {showSettings && (\n        <SettingsDrawer\n          state={state}\n          onClose={() => setShowSettings(false)}\n          onRestart={handleRestart}\n          validationResult={validationResult}\n        />\n      )}\n    </div>\n  );\n}\n\n\n","/**\n * Game rules that create the \"memory bias\" feeling\n */\n\n/**\n * Primacy lock: first memory choice sets primacyId permanently\n * (Handled in reducer - primacyId can only be set once)\n */\n\n/**\n * Weighting: supporting choices raise avoidance; contradictory choices raise honesty + pressure\n * (Handled via effects in story.json)\n */\n\n/**\n * Suppression: suppressing contradictions raises avoidance + pressure and sets a suppress-flag\n * (Handled via effects in story.json)\n */\n\n/**\n * Drift: derived \"tone\" tag from stats that affects text rendering + available choices\n * (Handled in selectors.getDerivedTone)\n */\n\n/**\n * Pressure thresholds: at pressure >= 6, remove certain \"gentle/reflective\" options; add intrusive lines\n * (Handled via conditions in story.json choices)\n */\n\n/**\n * Filter choices based on pressure thresholds\n */\nexport function filterChoicesByPressure(choices, pressure) {\n  if (pressure >= 6) {\n    // Remove gentle/reflective options at high pressure\n    return choices.filter((choice) => {\n      const tags = choice.tags || [];\n      return !tags.includes('gentle') && !tags.includes('reflective');\n    });\n  }\n  return choices;\n}\n\n/**\n * Get intrusive lines based on pressure\n */\nexport function getIntrusiveLines(pressure, tone) {\n  if (pressure < 6) return [];\n\n  const lines = [\n    \"You feel the story pulling at you.\",\n    \"Something doesn't fit.\",\n    \"The memory shifts when you look away.\",\n    \"You're editing as you speak.\",\n  ];\n\n  if (pressure >= 8) {\n    lines.push(\"The contradiction won't stay buried.\");\n    lines.push(\"You can feel the weight of what you're not saying.\");\n  }\n\n  return lines;\n}\n\n/**\n * Apply tone to text blocks\n */\nexport function applyToneToBlocks(blocks, tone) {\n  if (tone === 'intrusive' || tone === 'sharp') {\n    // Add subtle emphasis to certain blocks\n    return blocks.map((block) => {\n      if (block.type === 'whisper') {\n        return { ...block, type: 'whisper', emphasis: true };\n      }\n      return block;\n    });\n  }\n  return blocks;\n}\n\n\n"],"names":["initialState","sceneId","primacyId","stats","honesty","avoidance","tenderness","anger","shame","clocks","pressure","flags","weights","memories","history","gameReducer","state","action","type","payload","timestamp","Date","now","effects","newState","set","Object","entries","forEach","_ref","key","value","addStats","_ref2","stat","addClock","_ref3","clock","setFlags","flag","addWeights","_ref4","weight","addMemory","applyEffects","startSceneId","STORAGE_KEY","validateStory","story","errors","warnings","push","valid","meta","id","title","scenes","Array","isArray","length","sceneMap","Map","scene","has","kind","validKinds","includes","choices","choice","index","label","next","conditions","condition","condIndex","validateScene","reachable","startId","Set","visited","traverse","add","get","findReachableScenes","allSceneIds","keys","unreachable","from","filter","join","getAvailableChoices","every","op","compareValues","evaluateCondition","actual","expected","getDerivedTone","getPressureTier","ChoiceList","onChoice","containerRef","useRef","choiceRefs","_jsx","className","ref","role","children","map","el","current","onClick","onKeyDown","e","handleKeyDown","_choiceRefs$current$n","_choiceRefs$current$p","preventDefault","nextIndex","Math","min","focus","prevIndex","max","tabIndex","SceneView","blocks","intrusiveLines","tone","pressureTier","_jsxs","block","BlockComponent","speaker","WhisperBlock","DialogueBlock","ParagraphBlock","getBlockComponent","line","text","emphasis","ContentNote","_scene$blocks","skipNote","useEffect","firstChoice","getBlockClassName","ReflectionView","reflectionLines","lines","reflectionLinesData","primacyLines","selected","shuffleArray","slice","dominantStat","reduce","a","b","hasSuppression","some","suppressionKey","pressureKey","generateReflectionLines","array","shuffled","i","j","floor","random","EndingView","onRestart","SettingsDrawer","onClose","validationResult","stopPropagation","memory","error","warning","GameRoute","dispatch","useReducer","saved","serialized","localStorage","getItem","JSON","parse","console","warn","loadGameState","storyData","showSettings","setShowSettings","useState","setValidationResult","result","stringify","setItem","saveGameState","handleChoice","handleRestart","removeItem","clearGameState","find","getCurrentScene","availableChoices","filteredChoices","tags","getIntrusiveLines","blocksWithTone","applyToneToBlocks","skip_content_note","process"],"sourceRoot":""}